{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 37,
  "summary": "Team member photo workflow should be file-upload-only: remove manual photo URL input option from Team Member create/edit; keep preview driven by the uploaded image URL stored in `avatar`.",
  "architectural_notes": [
    "Program Calendar UI must be full-width and dominant (not sidebar), with responsive design: desktop calendar grid + mobile agenda list view.",
    "Calendar supports switchable views: Monthly / Weekly / Agenda.",
    "Provide filter controls above the calendar: Unit/Divisi, PIC, Status, Priority.",
    "Each date shows a badge count of programs; clicking a date opens a right-side detail panel (drawer) or modal.",
    "Clicking a program opens a detail drawer with description, period, PIC, progress visualization, status, and an Edit action.",
    "UI styling direction: prioritize readability (larger fonts, generous spacing, clear contrast), card-based layout, soft shadows, consistent icons, and restrained status colors.",
    "Calendar UI polish direction confirmed: more spacious layout (larger spacing), softer colors, larger/more readable typography, simpler agenda layout; adjust calendar grid density (tighter vs looser) as part of this refinement.",
    "Avoid horizontal scrolling to access program details; ensure details are accessible without shifting/scrolling sideways (e.g., responsive drawer/modal or inline details on smaller screens) and improve overall scroll smoothness/usability.",
    "Add a subtle smooth open/close transition for the program detail drawer/modal/sheet to improve perceived UX polish.",
    "Support automatic reminders for calendar items (e.g., 1 day and 3 hours before start/deadline)."
  ],
  "known_issues": [
    "KPI program dropdown is hard to use: scrolling/searching for a program is not smooth/doesn't work well.",
    "KPI “Related Program” dropdown still does not scroll smoothly (issue persists after latest deploy/build).",
    "Users need to scroll/shift to the right to see program details; overall scrolling feels cumbersome/not smooth when browsing programs.",
    "Program Calendar tab is blank across devices/browsers (entire UI missing: header/filters/view switch/calendar body) while other tabs (e.g., Programs/KPI) render normally.",
    "Calendar error/crash disebabkan Select.Item/SelectItem memiliki value string kosong (value=\"\"), termasuk kemungkinan dari mapping data API; perlu dihapus/diganti agar Calendar tidak error.",
    "Team member photo upload is failing (HTTP 400) when trying to upload a selected photo file.",
    "Team card photo change flow should work reliably without errors when clicking the avatar frame to open the device file chooser and uploading/replacing the image."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-add-a-new-program-calendar-view-in-the-dashboard-that-defaults-to-today-highlights-today-on-a-calendar-ui-and-clearly-shows-which-programs-are-running-today",
      "title": "Add a new \"Program Calendar\" view in the dashboard that defaults to today, highlights today on a calendar UI, and clearly shows which programs are running today.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-wire-the-calendar-view-to-data-fetching-via-react-query-using-the-backend-active-on-date-query-ensure-correct-date-conversion-between-javascript-date-and-backend-int-bigint-epoch-values",
      "title": "Wire the calendar view to data fetching via React Query, using the backend active-on-date query; ensure correct date conversion between JavaScript Date and backend Int/BigInt epoch values.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-redesign-the-existing-program-calendar-dashboard-tab-frontend-src-components-programcalendartab-tsx-into-a-full-width-readability-first-calendar-experience-that-feels-like-a-professional-management-tool-e-g-notion-clickup-google-calendar-style-prioritizing-large-typography-generous-spacing-clear-contrast-and-a-clean-calendar-grid-on-both-desktop-and-mobile",
      "title": "Redesign the existing Program Calendar dashboard tab (frontend/src/components/ProgramCalendarTab.tsx) into a full-width, readability-first calendar experience that feels like a professional management tool (e.g., Notion/ClickUp/Google Calendar style), prioritizing large typography, generous spacing, clear contrast, and a clean calendar grid on both desktop and mobile.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-view-mode-switcher-to-the-program-calendar-tab-with-three-modes-monthly-weekly-and-agenda-ensure-the-default-mode-is-monthly-on-desktop-and-mobile-defaults-to-agenda-for-better-readability",
      "title": "Add a view mode switcher to the Program Calendar tab with three modes: Monthly, Weekly, and Agenda; ensure the default mode is Monthly on desktop, and mobile defaults to Agenda for better readability.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-add-filter-controls-directly-above-the-calendar-for-unit-division-pic-status-and-priority-and-apply-these-filters-consistently-across-monthly-weekly-agenda-views-and-the-day-program-detail-panels",
      "title": "Add filter controls directly above the calendar for Unit/Division, PIC, Status, and Priority, and apply these filters consistently across Monthly/Weekly/Agenda views and the day/program detail panels.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-in-monthly-and-weekly-calendar-grid-views-display-a-badge-on-each-date-cell-indicating-the-number-of-programs-matching-current-filters-that-are-active-on-that-date-clicking-a-date-opens-a-detail-panel-right-side-panel-on-desktop-or-a-modal-sheet-on-smaller-screens-listing-the-programs-for-that-date",
      "title": "In Monthly and Weekly calendar grid views, display a badge on each date cell indicating the number of programs matching current filters that are active on that date; clicking a date opens a detail panel (right-side panel on desktop or a modal/sheet on smaller screens) listing the programs for that date.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-when-a-user-clicks-a-program-from-any-calendar-day-agenda-list-open-a-program-detail-drawer-sheet-showing-description-period-start-end-pic-a-visual-progress-bar-status-and-an-edit-button-that-opens-the-existing-program-edit-flow-reuse-the-current-programformdialog-behavior",
      "title": "When a user clicks a program from any calendar/day/agenda list, open a program detail drawer/sheet showing: description, period (start/end), PIC, a visual progress bar, status, and an Edit button that opens the existing program edit flow (reuse the current ProgramFormDialog behavior).",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-program-calendar-data-loading-strategy-to-support-monthly-weekly-visible-ranges-using-the-existing-backend-range-query-getprogramsactiveinrange-via-react-query-ensure-correct-conversion-between-javascript-date-ranges-and-backend-timerange-bigint-milliseconds-and-avoid-excessive-refetches-when-navigating-within-the-calendar",
      "title": "Update the Program Calendar data loading strategy to support Monthly/Weekly visible ranges using the existing backend range query (getProgramsActiveInRange) via React Query; ensure correct conversion between JavaScript Date ranges and backend TimeRange BigInt milliseconds, and avoid excessive refetches when navigating within the calendar.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-refine-program-calendar-visual-design-to-follow-a-modern-card-based-ui-with-soft-shadows-consistent-iconography-non-garish-status-priority-colors-and-strong-readability-over-dark-aesthetic-heavy-styling-ensure-the-calendar-remains-full-width-without-a-cramped-sidebar-layout",
      "title": "Refine Program Calendar visual design to follow a modern, card-based UI with soft shadows, consistent iconography, non-garish status/priority colors, and strong readability over dark/aesthetic-heavy styling; ensure the calendar remains full-width without a cramped sidebar layout.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-kpi-create-edit-form-frontend-src-components-kpiformdialog-tsx-so-the-related-program-dropdown-supports-smooth-scrolling-for-long-program-lists-and-allows-users-to-quickly-search-filter-programs-by-name-before-selecting",
      "title": "Update the KPI create/edit form (frontend/src/components/KpiFormDialog.tsx) so the “Related Program” dropdown supports smooth scrolling for long program lists and allows users to quickly search/filter programs by name before selecting.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-kpi-program-dropdown-ui-is-accessible-and-keyboard-friendly-users-can-open-the-selector-type-to-filter-navigate-results-with-arrow-keys-and-confirm-selection-with-enter-escape-without-losing-focus-or-closing-unexpectedly",
      "title": "Ensure the KPI program dropdown UI is accessible and keyboard-friendly: users can open the selector, type to filter, navigate results with arrow keys, and confirm selection with Enter/Escape without losing focus or closing unexpectedly.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-kpi-related-program-dropdown-so-the-options-list-scrolls-smoothly-and-reliably-for-long-program-lists-mouse-wheel-trackpad-without-scrolling-the-underlying-page-or-closing-the-popover-unexpectedly",
      "title": "Fix the KPI “Related Program” dropdown so the options list scrolls smoothly and reliably for long program lists (mouse wheel + trackpad), without scrolling the underlying page or closing the popover unexpectedly.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-the-dropdown-s-scroll-behavior-implementation-in-frontend-src-components-relatedprogramcombobox-tsx-to-ensure-consistent-scroll-capture-inside-the-popover-content-e-g-prevent-scroll-chaining-propagation-to-the-document-and-ensure-the-scroll-container-is-the-element-receiving-wheel-events",
      "title": "Improve the dropdown’s scroll behavior implementation in frontend/src/components/RelatedProgramCombobox.tsx to ensure consistent scroll capture inside the popover content (e.g., prevent scroll chaining/propagation to the document and ensure the scroll container is the element receiving wheel events).",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-update-all-user-facing-text-within-the-program-calendar-feature-to-english-including-headers-buttons-filter-labels-placeholders-empty-states-view-switcher-labels-and-drawer-panel-copy-while-keeping-existing-functionality-unchanged",
      "title": "Update all user-facing text within the Program Calendar feature to English (including headers, buttons, filter labels/placeholders, empty states, view switcher labels, and drawer/panel copy) while keeping existing functionality unchanged.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-refine-the-program-calendar-layout-to-be-more-spacious-and-readability-first-by-increasing-typography-scale-and-spacing-in-the-program-calendar-tab-header-filter-card-view-controls-and-calendar-container-ensuring-consistent-vertical-rhythm-on-both-desktop-and-mobile",
      "title": "Refine the Program Calendar layout to be more spacious and readability-first by increasing typography scale and spacing in the Program Calendar tab header, filter card, view controls, and calendar container, ensuring consistent vertical rhythm on both desktop and mobile.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-calendar-grid-density-control-for-month-and-week-views-with-at-least-two-options-e-g-comfortable-and-compact-that-adjusts-day-cell-padding-height-and-grid-gaps-so-users-can-choose-a-tighter-or-looser-grid-without-affecting-agenda-view",
      "title": "Add a calendar grid density control for Month and Week views with at least two options (e.g., Comfortable and Compact) that adjusts day-cell padding/height and grid gaps so users can choose a tighter or looser grid without affecting agenda view.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-simplify-the-agenda-view-layout-to-reduce-visual-clutter-while-keeping-all-essential-information-program-name-unit-pic-status-priority-and-progress-and-preserving-click-to-open-program-details-behavior",
      "title": "Simplify the Agenda view layout to reduce visual clutter while keeping all essential information (program name, unit, PIC, status, priority, and progress) and preserving click-to-open program details behavior.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-soften-the-program-calendar-color-usage-including-status-priority-badges-and-calendar-day-states-such-as-today-has-programs-empty-to-use-restrained-non-garish-tones-with-strong-contrast-for-readability-in-both-light-and-dark-themes",
      "title": "Soften the Program Calendar color usage (including status/priority badges and calendar day states such as today/has-programs/empty) to use restrained, non-garish tones with strong contrast for readability in both light and dark themes.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-programs-list-screen-frontend-src-components-programstab-tsx-so-users-can-view-full-program-details-without-needing-to-horizontally-scroll-right-swipe-the-page-e-g-provide-a-row-card-click-that-opens-a-detail-drawer-sheet-and-avoid-wide-tables-that-overflow-the-viewport-on-common-laptop-mobile-widths",
      "title": "Update the Programs list screen (frontend/src/components/ProgramsTab.tsx) so users can view full program details without needing to horizontally scroll/right-swipe the page (e.g., provide a row/card click that opens a detail drawer/sheet, and avoid wide tables that overflow the viewport on common laptop/mobile widths).",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-scrolling-ergonomics-on-the-programs-screen-by-ensuring-the-primary-scroll-area-is-straightforward-and-stable-no-nested-scroll-traps-and-that-any-secondary-scroll-containers-tables-drawers-popovers-capture-wheel-trackpad-scrolling-reliably-without-scrolling-the-underlying-page-unexpectedly",
      "title": "Improve scrolling ergonomics on the Programs screen by ensuring the primary scroll area is straightforward and stable (no nested scroll traps), and that any secondary scroll containers (tables, drawers, popovers) capture wheel/trackpad scrolling reliably without scrolling the underlying page unexpectedly.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-reuse-the-existing-program-details-presentation-used-by-the-calendar-frontend-src-components-program-calendar-programdetaildrawer-tsx-for-program-details-from-the-programs-screen-so-the-detail-view-is-consistent-and-does-not-require-widening-the-list-layout-to-show-details",
      "title": "Reuse the existing program details presentation used by the calendar (frontend/src/components/program-calendar/ProgramDetailDrawer.tsx) for program details from the Programs screen, so the detail view is consistent and does not require widening the list layout to show details.",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-subtle-smooth-open-close-transition-for-the-program-detail-drawer-sheet-frontend-src-components-program-calendar-programdetaildrawer-tsx-so-that-when-a-program-is-opened-from-the-calendar-or-programs-list-the-panel-animates-in-with-a-gentle-fade-slide-slide-from-the-right-on-desktop-slide-up-from-the-bottom-on-mobile-and-animates-out-on-close",
      "title": "Add a subtle, smooth open/close transition for the Program Detail drawer/sheet (frontend/src/components/program-calendar/ProgramDetailDrawer.tsx) so that when a program is opened from the calendar or programs list, the panel animates in with a gentle fade + slide (slide from the right on desktop, slide up from the bottom on mobile) and animates out on close.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-new-daily-view-mode-to-the-program-calendar-ui-intended-for-operational-usage-alongside-the-existing-monthly-view-intended-for-management-usage",
      "title": "Add a new Daily view mode to the Program Calendar UI intended for operational usage, alongside the existing Monthly view intended for management usage.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-category-based-color-coding-in-the-calendar-ui-and-display-calendar-items-from-three-categories-programs-blue-team-agenda-green-and-kpi-deadlines-red",
      "title": "Implement category-based color coding in the calendar UI and display calendar items from three categories: Programs (blue), Team Agenda (green), and KPI Deadlines (red).",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-add-automatic-in-app-reminders-for-calendar-items-at-h-1-day-and-h-3-hours-before-the-relevant-time-with-clear-limitations-and-user-controls",
      "title": "Add automatic in-app reminders for calendar items at H-1 day and H-3 hours before the relevant time, with clear limitations and user controls.",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-simplify-the-overall-visual-presentation-of-the-program-calendar-tab-to-a-minimal-distraction-free-style-while-keeping-all-existing-functionality-filters-view-switching-reminders-toggle-day-program-interactions-unchanged",
      "title": "Simplify the overall visual presentation of the Program Calendar tab to a minimal, distraction-free style while keeping all existing functionality (filters, view switching, reminders toggle, day/program interactions) unchanged.",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-simplify-the-month-and-week-grid-views-by-reducing-visual-chrome-in-day-cells-and-grid-layout-less-shadow-fewer-borders-rounding-fewer-high-emphasis-hover-effects-while-preserving-today-highlight-out-of-month-dimming-and-category-indicators",
      "title": "Simplify the Month and Week grid views by reducing visual chrome in day cells and grid layout (less shadow, fewer borders/rounding, fewer high-emphasis hover effects) while preserving today highlight, out-of-month dimming, and category indicators.",
      "reqIds": [
        "REQ-30"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-day-and-agenda-views-more-compact-and-consistent-by-simplifying-list-items-reduce-padding-reduce-icon-prominence-remove-unnecessary-visual-decoration-while-preserving-essential-information-and-click-to-open-program-detail-behavior",
      "title": "Make the Day and Agenda views more compact and consistent by simplifying list items (reduce padding, reduce icon prominence, remove unnecessary visual decoration) while preserving essential information and click-to-open Program Detail behavior.",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-simplify-the-filter-and-control-areas-above-the-calendar-to-reduce-perceived-complexity-more-compact-layout-fewer-heavy-card-shadow-treatments-without-removing-any-filter-fields-or-controls",
      "title": "Simplify the filter and control areas above the calendar to reduce perceived complexity (more compact layout, fewer heavy card/shadow treatments), without removing any filter fields or controls.",
      "reqIds": [
        "REQ-32"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-program-calendar-dashboard-tab-so-it-always-renders-visible-ui-header-filters-view-controls-and-a-calendar-body-when-the-user-clicks-the-calendar-tab-instead-of-showing-a-completely-blank-empty-screen",
      "title": "Fix the Program Calendar dashboard tab so it always renders visible UI (header, filters, view controls, and a calendar body) when the user clicks the Calendar tab, instead of showing a completely blank/empty screen.",
      "reqIds": [
        "REQ-33"
      ],
      "version": 1
    },
    {
      "id": "feature-add-defensive-runtime-guards-in-programcalendartab-frontend-src-components-programcalendartab-tsx-so-browser-api-usage-cannot-crash-rendering-including-safe-handling-for-localstorage-reads-writes-e-g-blocked-storage-and-notification-permission-requests",
      "title": "Add defensive runtime guards in ProgramCalendarTab (frontend/src/components/ProgramCalendarTab.tsx) so browser-API usage cannot crash rendering, including safe handling for localStorage reads/writes (e.g., blocked storage) and Notification permission requests.",
      "reqIds": [
        "REQ-34"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-programcalendartab-gracefully-handles-data-shape-edge-cases-so-calendar-rendering-cannot-crash-when-program-fields-are-unexpected-e-g-missing-undefined-nested-fields-by-adding-safe-access-patterns-and-fallback-display-values-where-needed",
      "title": "Ensure ProgramCalendarTab gracefully handles data-shape edge cases so calendar rendering cannot crash when program fields are unexpected (e.g., missing/undefined nested fields) by adding safe access patterns and fallback display values where needed.",
      "reqIds": [
        "REQ-35"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-user-visible-english-error-empty-state-ui-within-the-calendar-tab-when-data-queries-fail-or-return-no-items-including-a-clear-retry-action-that-triggers-react-query-refetch-for-the-calendar-range-queries",
      "title": "Add a user-visible, English error/empty-state UI within the Calendar tab when data queries fail or return no items, including a clear 'Retry' action that triggers React Query refetch for the calendar range queries.",
      "reqIds": [
        "REQ-36"
      ],
      "version": 1
    },
    {
      "id": "feature-diagnose-and-fix-the-issue-where-the-dashboard-calendar-tab-renders-as-a-fully-blank-empty-screen-no-header-filters-controls-or-calendar-body-while-other-tabs-render-normally-as-shown-in-the-uploaded-screenshot-img-0091-jpeg-the-calendar-tab-must-always-render-visible-ui-and-must-never-fail-silently",
      "title": "Diagnose and fix the issue where the Dashboard \"Calendar\" tab renders as a fully blank/empty screen (no header, filters, controls, or calendar body) while other tabs render normally, as shown in the uploaded screenshot (IMG_0091.jpeg). The Calendar tab must always render visible UI and must never fail silently.",
      "reqIds": [
        "REQ-37"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-top-level-defensive-error-boundary-around-the-entire-program-calendar-tab-content-not-only-the-calendar-body-card-so-that-crashes-occurring-before-the-internal-calendartaberrorboundary-renders-e-g-during-hook-initialization-state-initialization-or-view-range-calculations-still-show-a-visible-fallback-ui-inside-the-calendar-tab",
      "title": "Add a top-level defensive error boundary around the entire Program Calendar tab content (not only the calendar body card), so that crashes occurring before the internal CalendarTabErrorBoundary renders (e.g., during hook initialization, state initialization, or view-range calculations) still show a visible fallback UI inside the Calendar tab.",
      "reqIds": [
        "REQ-38"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-all-user-facing-text-involved-in-the-calendar-tab-blank-screen-fix-and-any-new-fallback-ui-is-in-english-including-headings-buttons-and-descriptions",
      "title": "Ensure all user-facing text involved in the Calendar-tab blank-screen fix and any new fallback UI is in English (including headings, buttons, and descriptions).",
      "reqIds": [
        "REQ-39"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-program-calendar-tab-crash-by-removing-any-selectitem-value-usage-in-program-calendar-filters-and-ensuring-no-selectitem-uses-an-empty-string-value",
      "title": "Fix the Program Calendar tab crash by removing any <SelectItem value=\"\"> usage in Program Calendar filters and ensuring no SelectItem uses an empty-string value.",
      "reqIds": [
        "REQ-40"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-all-dynamically-generated-selectitem-values-used-in-the-program-calendar-tab-are-non-empty-strings-filter-out-or-normalize-any-empty-whitespace-values-coming-from-api-derived-lists-e-g-divisions-pic-names-so-the-select-component-cannot-crash",
      "title": "Ensure all dynamically generated SelectItem values used in the Program Calendar tab are non-empty strings; filter out or normalize any empty/whitespace values coming from API-derived lists (e.g., divisions, PIC names) so the Select component cannot crash.",
      "reqIds": [
        "REQ-41"
      ],
      "version": 1
    },
    {
      "id": "feature-extend-the-team-member-data-model-to-support-profile-photos-external-url-and-single-manager-hierarchy-for-org-chart-rendering-by-adding-1-an-optional-avatar-photo-url-field-and-2-an-optional-manager-reference-direct-manager-field-where-the-director-root-has-no-manager",
      "title": "Extend the Team Member data model to support profile photos (external URL) and single-manager hierarchy for org-chart rendering by adding: (1) an optional avatar/photo URL field and (2) an optional manager reference (direct manager) field where the director/root has no manager.",
      "reqIds": [
        "REQ-42"
      ],
      "version": 1
    },
    {
      "id": "feature-redesign-the-team-screen-frontend-src-components-teammemberstab-tsx-from-a-table-based-layout-into-a-professional-card-view-that-shows-for-each-member-avatar-from-external-url-name-job-title-existing-role-field-and-a-division-badge",
      "title": "Redesign the Team screen (frontend/src/components/TeamMembersTab.tsx) from a table-based layout into a professional card view that shows for each member: avatar (from external URL), name, job title (existing role field), and a division badge.",
      "reqIds": [
        "REQ-45"
      ],
      "version": 1
    },
    {
      "id": "feature-add-profile-photo-url-capture-and-update-to-the-team-member-create-edit-flow-frontend-src-components-teammemberformdialog-tsx-including-live-preview-and-basic-url-validation-while-storing-only-the-url-no-blob-storage",
      "title": "Add profile photo URL capture and update to the Team member create/edit flow (frontend/src/components/TeamMemberFormDialog.tsx), including live preview and basic URL validation, while storing only the URL (no blob storage).",
      "reqIds": [
        "REQ-46"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-second-mode-on-the-team-screen-called-structure-view-that-renders-an-org-chart-based-on-the-single-manager-hierarchy-with-the-director-root-at-the-top-and-direct-reports-beneath",
      "title": "Add a second mode on the Team screen called 'Structure View' that renders an org chart based on the single-manager hierarchy, with the director/root at the top and direct reports beneath.",
      "reqIds": [
        "REQ-47"
      ],
      "version": 1
    },
    {
      "id": "feature-add-manager-assignment-controls-to-the-team-member-create-edit-flow-so-users-can-set-each-member-s-direct-manager-single-manager-with-the-ability-to-set-no-manager-director-root",
      "title": "Add manager assignment controls to the Team member create/edit flow so users can set each member’s direct manager (single manager), with the ability to set 'No manager (Director/root)'.",
      "reqIds": [
        "REQ-48"
      ],
      "version": 1
    },
    {
      "id": "feature-update-all-user-facing-text-added-modified-for-the-team-upgrade-team-tab-labels-buttons-placeholders-empty-states-dialogs-toasts-to-english-including-existing-team-tab-ui-strings-that-are-currently-in-indonesian",
      "title": "Update all user-facing text added/modified for the Team upgrade (Team tab labels, buttons, placeholders, empty states, dialogs, toasts) to English, including existing Team tab UI strings that are currently in Indonesian.",
      "reqIds": [
        "REQ-49"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-team-member-create-edit-dialog-frontend-src-components-teammemberformdialog-tsx-to-support-selecting-a-photo-file-directly-from-the-user-s-device-mobile-desktop-and-automatically-uploading-it-to-an-external-image-hosting-service-then-storing-only-the-resulting-url-in-the-existing-avatar-field-for-create-edit-flows",
      "title": "Update the Team Member create/edit dialog (frontend/src/components/TeamMemberFormDialog.tsx) to support selecting a photo file directly from the user’s device (mobile/desktop) and automatically uploading it to an external image hosting service, then storing only the resulting URL in the existing `avatar` field for create + edit flows.",
      "reqIds": [
        "REQ-50"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-frontend-only-image-upload-utility-that-performs-the-external-upload-and-returns-the-hosted-image-url-with-clear-english-error-handling-and-a-safe-fallback-when-upload-configuration-is-missing-or-the-upload-fails",
      "title": "Implement a frontend-only image upload utility that performs the external upload and returns the hosted image URL, with clear, English error handling and a safe fallback when upload configuration is missing or the upload fails.",
      "reqIds": [
        "REQ-51"
      ],
      "version": 1
    },
    {
      "id": "feature-enhance-the-team-member-form-ux-around-photo-upload-to-include-uploading-state-progress-feedback-and-prevent-accidental-submission-while-an-upload-is-in-progress-while-keeping-all-user-facing-strings-in-english",
      "title": "Enhance the Team Member form UX around photo upload to include uploading state/progress feedback and prevent accidental submission while an upload is in progress, while keeping all user-facing strings in English.",
      "reqIds": [
        "REQ-52"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-team-member-create-edit-dialog-frontend-src-components-teammemberformdialog-tsx-to-remove-the-manual-photo-url-input-option-so-photos-can-only-be-added-via-device-file-upload-while-still-storing-only-the-hosted-image-url-in-the-existing-avatar-field-for-both-create-and-edit-flows",
      "title": "Update the Team Member create/edit dialog (frontend/src/components/TeamMemberFormDialog.tsx) to remove the manual photo URL input option so photos can only be added via device file upload, while still storing only the hosted image URL in the existing `avatar` field for both create and edit flows.",
      "reqIds": [
        "REQ-53"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-now-unused-manual-url-related-logic-from-the-team-member-form-implementation-while-keeping-image-upload-error-handling-upload-progress-ui-and-preview-behavior-intact",
      "title": "Remove now-unused manual-URL related logic from the Team Member form implementation, while keeping image upload error handling, upload progress UI, and preview behavior intact.",
      "reqIds": [
        "REQ-54"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-team-member-photo-upload-flow-so-selecting-an-image-file-from-the-device-no-longer-fails-with-http-400-as-shown-in-img-0094-png-and-reliably-results-in-a-hosted-image-url-being-stored-into-the-teammember-avatar-field-for-both-create-and-edit-flows",
      "title": "Fix the Team Member photo upload flow so selecting an image file from the device no longer fails with HTTP 400 (as shown in IMG_0094.png) and reliably results in a hosted image URL being stored into the TeamMember `avatar` field for both create and edit flows.",
      "reqIds": [
        "REQ-55"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-image-upload-utility-frontend-src-utils-imageupload-ts-to-use-a-simple-practical-upload-strategy-that-does-not-require-the-user-to-pick-or-configure-a-specific-third-party-service-and-that-avoids-common-causes-of-http-400-errors-the-utility-must-still-return-a-hosted-image-url-and-keep-progress-reporting-support-used-by-the-team-member-form",
      "title": "Update the frontend image upload utility (frontend/src/utils/imageUpload.ts) to use a simple, practical upload strategy that does not require the user to pick or configure a specific third-party service, and that avoids common causes of HTTP 400 errors. The utility must still return a hosted image URL and keep progress reporting support used by the Team Member form.",
      "reqIds": [
        "REQ-56"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-error-handling-and-ux-messaging-in-teammemberformdialog-frontend-src-components-teammemberformdialog-tsx-for-upload-failures-so-users-understand-what-happened-and-how-to-proceed-without-breaking-the-existing-manager-selection-preview-and-submit-disable-protections",
      "title": "Improve error handling and UX messaging in TeamMemberFormDialog (frontend/src/components/TeamMemberFormDialog.tsx) for upload failures so users understand what happened and how to proceed, without breaking the existing manager selection, preview, and submit-disable protections.",
      "reqIds": [
        "REQ-57"
      ],
      "version": 1
    },
    {
      "id": "feature-redesign-the-team-structure-view-org-chart-ui-to-visually-match-the-uploaded-example-functional-structure-a-single-leader-root-node-centered-at-the-top-a-horizontal-connector-line-beneath-then-multiple-division-columns-laid-out-horizontally-with-each-column-showing-a-division-label-and-the-members-in-that-division-beneath-it",
      "title": "Redesign the Team \"Structure View\" org chart UI to visually match the uploaded example (functional structure): a single leader/root node centered at the top, a horizontal connector line beneath, then multiple division columns laid out horizontally, with each column showing a division label and the members in that division beneath it.",
      "reqIds": [
        "REQ-58"
      ],
      "version": 1
    },
    {
      "id": "feature-preserve-existing-structure-view-interactions-while-applying-the-new-layout-clicking-a-member-still-selects-them-and-opens-the-existing-teammemberdetailspanel-selection-state-remains-visible-in-the-new-node-styling",
      "title": "Preserve existing Structure View interactions while applying the new layout: clicking a member still selects them and opens the existing TeamMemberDetailsPanel; selection state remains visible in the new node styling.",
      "reqIds": [
        "REQ-59"
      ],
      "version": 1
    },
    {
      "id": "feature-keep-all-existing-hierarchy-validation-behaviors-and-english-user-facing-messages-in-structure-view-warnings-missing-director-root-state-and-unassigned-orphan-members-while-updating-their-presentation-to-fit-the-new-functional-structure-layout",
      "title": "Keep all existing hierarchy validation behaviors and English user-facing messages in Structure View (warnings, missing director/root state, and unassigned/orphan members) while updating their presentation to fit the new functional-structure layout.",
      "reqIds": [
        "REQ-60"
      ],
      "version": 1
    },
    {
      "id": "feature-do-not-change-any-team-data-model-backend-apis-or-stored-team-member-records-as-part-of-this-structure-view-visual-update-the-uploaded-image-is-a-ui-style-reference-only",
      "title": "Do not change any Team data model, backend APIs, or stored team member records as part of this Structure View visual update; the uploaded image is a UI style reference only.",
      "reqIds": [
        "REQ-61"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-team-member-card-avatar-on-the-team-members-cards-view-frontend-src-components-team-teammembercard-tsx-used-by-frontend-src-components-teammemberstab-tsx-so-the-photo-frame-is-larger-1-1-square-and-slightly-rounded-while-still-showing-an-initials-fallback-when-no-valid-avatar-url-exists",
      "title": "Update the Team member card avatar on the Team Members “Cards” view (frontend/src/components/team/TeamMemberCard.tsx used by frontend/src/components/TeamMembersTab.tsx) so the photo frame is larger, 1:1 square, and slightly rounded, while still showing an initials fallback when no valid avatar URL exists.",
      "reqIds": [
        "REQ-62"
      ],
      "version": 1
    },
    {
      "id": "feature-enable-changing-a-team-member-photo-directly-by-clicking-tapping-the-avatar-frame-on-the-team-member-card-without-using-the-edit-icon-opening-the-device-file-chooser-mobile-desktop-uploading-via-the-existing-frontend-image-upload-utility-frontend-src-utils-imageupload-ts-and-saving-the-returned-hosted-url-into-the-member-s-avatar-field-via-the-existing-update-mutation-flow",
      "title": "Enable changing a Team member photo directly by clicking/tapping the avatar frame on the Team member card (without using the edit icon), opening the device file chooser (mobile/desktop), uploading via the existing frontend image upload utility (frontend/src/utils/imageUpload.ts), and saving the returned hosted URL into the member’s avatar field via the existing update mutation flow.",
      "reqIds": [
        "REQ-63"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-click-to-change-photo-flow-robust-and-error-free-show-a-clear-uploading-state-on-the-avatar-frame-prevent-double-trigger-uploads-handle-upload-failures-with-english-error-messaging-and-ensure-the-card-does-not-crash-or-become-unusable-if-uploadimage-throws-or-returns-an-invalid-url",
      "title": "Make the click-to-change-photo flow robust and error-free: show a clear uploading state on the avatar frame, prevent double-trigger uploads, handle upload failures with English error messaging, and ensure the card does not crash or become unusable if uploadImage throws or returns an invalid URL.",
      "reqIds": [
        "REQ-64"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Add a program calendar feature aligned to today's date to show which program is currently running",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Add a backend query API to return programs that are active on a given date, based on each program’s startDate/endDate.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Redesign Program Calendar UX/UI: full-width large calendar with Monthly/Weekly/Agenda switch, day badges + click-to-open detail drawer/modal, filters (Unit/Divisi, PIC, Status, Priority), program detail drawer (description, period, PIC, progress bar, status, edit), and mobile agenda list view",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Fix KPI dropdown so users can scroll and easily search/select a program",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Improve Program Calendar UX to avoid needing horizontal scrolling/right shift to view details; make scrolling/navigation smoother and easier to browse all programs",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Add a subtle smooth transition/animation when opening the program detail drawer/modal (e.g., slide/fade)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Add automatic reminders/notifications for calendar items (e.g., H-1 day and H-3 hours before)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Add category-based color coding: Program (blue), Team agenda (green), KPI deadline (red)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Add an additional calendar mode focused on Daily view for operational use (alongside Monthly view for management)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Add a new backend data model and APIs for Team Agenda items that can be displayed on the Program Calendar and queried by date range.",
      "reqIds": [
        "REQ-24"
      ],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Add a KPI deadline date field in the backend so KPI deadlines can be shown on the calendar and used for reminders.",
      "reqIds": [
        "REQ-25"
      ],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Simplify the Program Calendar UI across all modes (Month/Week/Daily/Agenda) by reducing visual clutter (colors/borders/icons/shadows), using a more minimal grid, and making Day/Agenda lists more compact and consistent.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-13",
      "summary": "Upgrade existing Team (Tim) feature UI to a professional card view showing avatar/profile photo, name, job title, and division badge for each member",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-14",
      "summary": "Add Team member profile photo upload/update feature that stores photos as external URLs (not stored as blobs)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Add a Structure View mode (org chart) for the Team feature using a single-manager hierarchy, with the director as the root/top node",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-17",
      "summary": "Update backend Team Member CRUD APIs to persist and return the new Team Member fields (avatar URL + manager reference) and validate that the hierarchy is single-manager (at most one manager per member) while allowing a single root member with no manager.",
      "reqIds": [
        "REQ-43"
      ],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "If adding new fields to TeamMember affects stable state across upgrades, implement a conditional state migration so existing deployed data is preserved and new fields default safely (e.g., avatar URL empty/none; manager none) for existing members.",
      "reqIds": [
        "REQ-44"
      ],
      "status": "pending"
    },
    {
      "id": "AR-19",
      "summary": "Update Team member photo workflow so users can pick an image file from their device (HP/laptop) in create+edit, automatically upload it to an external image hosting service, and store only the returned URL (no blob storage in backend).",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-20",
      "summary": "Remove the manual photo URL input option from the Team Member create/edit form so photos can only be added via device file upload (while still storing only the resulting hosted URL and keeping preview).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-21",
      "summary": "Update Team 'Structure View' (org chart) UI to match the provided example’s visual style (functional-structure look: one leader on top, divisions laid out horizontally beneath, members under each), without changing any existing Team data.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-22",
      "summary": "Update Team member cards so avatar/photo frame is larger, square 1:1 with slight rounded corners, and supports click-on-frame to open device file chooser to change photo (no need to use edit icon)",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "projectName": "Add program calendar aligned to today's date to show currently running programs",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}