{
  "kind": "spec_vs_diff_report",
  "version": "1.0",
  "generatedAt": "2026-02-09T01:11:04.310Z",
  "summary": "Calendar tab UI and a React Query hook were added, but the requested backend single-date query API is not evidenced in the diff summary, and some new user-facing strings appear in Indonesian (violating the English-text constraint). The frontend hook currently calls a range-based backend method rather than a single-date active-on-date query.",
  "missing_requirements": [
    {
      "id": "REQ-1",
      "requirement": "Add a backend query API that accepts a single epoch-milliseconds date and returns programs where startDate <= date <= endDate, enforcing existing read authorization checks.",
      "reason": "The diff summary does not show any new backend query method that accepts a single date value. The only concrete evidence of active-on-date fetching is a frontend hook calling `actor.getProgramsActiveInRange(timeRange)`, which is a different API shape (range vs single date). Backend authorization behavior for such a method is also not evidenced.",
      "evidence": [
        "backend/main.mo",
        "frontend/src/hooks/useQueries.ts"
      ]
    },
    {
      "id": "REQ-3",
      "requirement": "Wire calendar view to data fetching via React Query using the backend active-on-date query (single date), with correct JS Date <-> backend epoch conversion.",
      "reason": "The new hook uses React Query and includes the date in the query key, but it calls `getProgramsActiveInRange` with a computed start/end-of-day range rather than using a backend 'active-on-date' single-date query as specified.",
      "evidence": [
        "frontend/src/hooks/useQueries.ts"
      ]
    },
    {
      "id": "REQ-2",
      "requirement": "Use English for any new user-facing text added by this change (including empty/loading/error states).",
      "reason": "ProgramCalendarTab introduces non-English labels for status/priority badges (e.g., 'Perencanaan', 'Berjalan', 'Selesai', 'Tinggi', 'Sedang', 'Rendah') and uses Indonesian locale formatting (`date-fns/locale/id`) for displayed dates.",
      "evidence": [
        "frontend/src/components/ProgramCalendarTab.tsx"
      ]
    },
    {
      "id": "REQ-2",
      "requirement": "Calendar view shows an English empty state message when no programs are active for the selected date, and handles loading/error states with English user-facing messages.",
      "reason": "The file is truncated; loading UI is partially shown (spinner), but there is no clear evidence in the provided diff summary of the required English empty state message and English error message handling.",
      "evidence": [
        "frontend/src/components/ProgramCalendarTab.tsx"
      ]
    }
  ],
  "hallucinated_features": [
    {
      "description": "Added a date-range-based backend call path (`getProgramsActiveInRange(timeRange)`) from the new calendar hook instead of (or in addition to) the requested single-date active-on-date query API.",
      "reason": "BuildRequest specifies a new backend query that accepts a single date value; the diff shows a range-based API being used from the frontend, which is not requested by the spec.",
      "evidence": [
        "frontend/src/hooks/useQueries.ts"
      ]
    },
    {
      "description": "Introduced Indonesian-language status/priority badge labels and Indonesian date locale formatting in the new calendar view.",
      "reason": "The BuildRequest explicitly constrains new user-facing text to English; adding Indonesian labels/locale is not requested and conflicts with the constraint.",
      "evidence": [
        "frontend/src/components/ProgramCalendarTab.tsx"
      ]
    },
    {
      "description": "Added/modified project tracking metadata file `project_state.json`.",
      "reason": "Not mentioned in the BuildRequest requirements or constraints as a deliverable feature.",
      "evidence": [
        "project_state.json"
      ]
    }
  ],
  "confidence": 0.62,
  "changed_files": [
    "backend/main.mo",
    "frontend-file-summaries.txt",
    "frontend/src/components/ProgramCalendarTab.tsx",
    "frontend/src/hooks/useInternetIdentity.ts",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/pages/Dashboard.tsx",
    "project_state.json"
  ]
}