{
  "kind": "build_request",
  "title": "Fix KPI form invalid record error on save",
  "projectName": "Sistem Tracking SHQ AQL",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Fix the 'invalid record' error that occurs when clicking 'Simpan' (Save) button in the KPI form by ensuring the frontend data structure matches the backend KPI type definition exactly",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Masih invalid record ketika input KPI",
          "Tidak terbaca field yang error. Muncul saat mencoba menyimpan"
        ]
      },
      "acceptanceCriteria": [
        "KPI form successfully saves without 'invalid record' error when all required fields are filled",
        "Form validates data types correctly before submission (Nilai Target and Nilai Realisasi as numbers)",
        "Dropdown values (Program Terkait, Tim/PIC, Periode, Status) serialize correctly to backend format",
        "Error messages are specific and indicate which field is invalid if validation fails"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Ensure Nilai Target (target value) field in KPI form is properly typed and serialized as a number (Nat) when submitting to backend, not as a string",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Nilai Target: 30"
        ]
      },
      "acceptanceCriteria": [
        "Nilai Target input field parses numeric input correctly",
        "Form submission sends Nilai Target as number type to backend",
        "Validation rejects non-numeric input in Nilai Target field"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Ensure Nilai Realisasi (realization value) field in KPI form is properly typed and serialized as a number (Nat) when submitting to backend, not as a string",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Nilai Realisasi: 15"
        ]
      },
      "acceptanceCriteria": [
        "Nilai Realisasi input field parses numeric input correctly",
        "Form submission sends Nilai Realisasi as number type to backend",
        "Validation rejects non-numeric input in Nilai Realisasi field"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Verify Program Terkait (Related Program) dropdown correctly maps the selected program to the backend-expected format (program ID or reference)",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Program Terkait: 'Mulazamah Tilawah'"
        ]
      },
      "acceptanceCriteria": [
        "Program Terkait selection sends correct program identifier to backend",
        "Dropdown loads available programs from backend",
        "Selected program value matches backend KPI.relatedProgram field type"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Verify Tim/PIC (Team/Person in Charge) dropdown correctly maps the selected team member to the backend-expected format (Principal ID or team member ID)",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Tim/PIC: 'Hadi Setiawan - Akademik (Management Pendidikan)'"
        ]
      },
      "acceptanceCriteria": [
        "Tim/PIC selection sends correct team member identifier to backend",
        "Dropdown loads available team members from backend",
        "Selected team member value matches backend KPI.assignedTo field type (Principal)"
      ]
    },
    {
      "id": "REQ-6",
      "text": "Add comprehensive error logging in KPI form submission to capture and display specific field validation errors from the backend response",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Tidak terbaca field yang error"
        ]
      },
      "acceptanceCriteria": [
        "Error messages from backend are caught and displayed to user",
        "Console logs show detailed error information including field name and validation failure reason",
        "Toast notifications display user-friendly error messages in Indonesian"
      ]
    }
  ],
  "constraints": [
    "Do not modify the backend KPI type structure (weight field has already been removed)",
    "Maintain existing KPI form UI layout and field names shown in the screenshot",
    "Preserve all existing form validation rules already implemented"
  ],
  "nonGoals": [
    "Adding new fields to the KPI form",
    "Changing the KPI form visual design or layout",
    "Modifying other tabs or features outside KPI management",
    "Implementing new KPI features beyond fixing the save error"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}